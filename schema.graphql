type Token {
  id: ID! # chainId-token address
  chainId: BigInt!
  symbol: String!
  name: String!
  decimals: BigInt!
  totalSupply: BigInt!
  volume: BigInt!
  txCount: BigInt!
  poolCount: BigInt! @index
  swapCount: BigInt!
  modifyLiquidityCount: BigInt!
  positionCount: BigInt!
  lpCount: BigInt!
  tvl: BigInt!
  whitelistPools: [String!]!
  tokenDayData: [TokenDayData!]! @derivedFrom(field: "token")
  tokenHourData: [TokenHourData!]! @derivedFrom(field: "token")
}

type Pool {
  id: ID! # chainId-poolId
  chainId: BigInt!
  poolId: String!
  name: String!
  createdAtTimestamp: BigInt! @index
  createdAtBlockNumber: BigInt! @index
  token0: Token! @index
  token1: Token! @index
  feeTier: BigInt! @index
  tickSpacing: BigInt!
  hooks: String!
  liquidity: BigInt!
  sqrtPrice: BigInt!
  sqrtPriceX96: BigInt!
  tick: BigInt!
  observationIndex: BigInt!
  feeGrowthGlobal0X128: BigInt!
  feeGrowthGlobal1X128: BigInt!
  volume0: BigInt!
  volume1: BigInt!
  fees0: BigInt!
  fees1: BigInt!
  tvl0: BigInt!
  tvl1: BigInt!
  txCount: BigInt! @index
  swapCount: BigInt!
  modifyLiquidityCount: BigInt!
  positionCount: BigInt!
  activePositionCount: BigInt!
  lpCount: BigInt!
  pool5MinuteData: [Pool5MinuteData!]! @derivedFrom(field: "pool")
  poolHourData: [PoolHourData!]! @derivedFrom(field: "pool")
  poolDayData: [PoolDayData!]! @derivedFrom(field: "pool")
  modifyLiquidities: [ModifyLiquidity!]! @derivedFrom(field: "pool")
  swaps: [Swap!]! @derivedFrom(field: "pool")
  ticks: [Tick!]! @derivedFrom(field: "pool")
  positions: [Position!]! @derivedFrom(field: "pool")
}

type Tick {
  id: ID! # chainId-<poolId>#<tick index>
  chainId: BigInt!
  poolId: String @index
  tickIdx: BigInt! @index
  pool: Pool! @index
  liquidityGross: BigInt!
  liquidityNet: BigInt!
  price0: BigInt!
  price1: BigInt!
  feeGrowthOutside0X128: BigInt!
  feeGrowthOutside1X128: BigInt!
  positionCount: BigInt!
  createdAtTimestamp: BigInt! @index
  createdAtBlockNumber: BigInt! @index
}

type LiquidityProvider {
  id: ID! # chainId-<poolId>-<liquidity provider address>
  chainId: BigInt!
  address: String! @index
  deposited0: BigInt!
  deposited1: BigInt!
  withdrawn0: BigInt!
  withdrawn1: BigInt!
  fees0: BigInt!
  fees1: BigInt!
  positionCount: BigInt!
  modifyLiquidityCount: BigInt!
  createdAtTimestamp: BigInt! @index
  createdAtBlockNumber: BigInt! @index
  positions: [Position!]! @derivedFrom(field: "liquidityProvider")
}

type Position {
  id: ID! # chainId-<poolId>#<owner>#<tickLower>#<tickUpper>
  chainId: BigInt!
  owner: String! @index
  liquidityProvider: LiquidityProvider! @index
  pool: Pool! @index
  token0: Token! @index
  token1: Token! @index
  tickLower: BigInt! @index
  tickUpper: BigInt! @index
  liquidity: BigInt!
  deposited0: BigInt!
  deposited1: BigInt!
  withdrawn0: BigInt!
  withdrawn1: BigInt!
  fees0: BigInt!
  fees1: BigInt!
  feeGrowthInside0LastX128: BigInt!
  feeGrowthInside1LastX128: BigInt!
  modifyLiquidityCount: BigInt!
  transaction: Transaction!
  createdAtTimestamp: BigInt! @index
  createdAtBlockNumber: BigInt! @index
}

type Transaction {
  id: ID! # chainId-txn hash
  chainId: BigInt!
  blockNumber: BigInt! @index
  timestamp: BigInt! @index
  gasUsed: BigInt!
  gasPrice: BigInt!
  modifyLiquidities: [ModifyLiquidity!]! @derivedFrom(field: "transaction")
  swaps: [Swap!]! @derivedFrom(field: "transaction")
}

type ModifyLiquidity
  @index(fields: ["timestamp", "pool"])
  @index(fields: ["amount", "pool"]) {
  id: ID! # chainId-transaction hash + "#" + index in modifyLiquidity array
  chainId: BigInt!
  transaction: Transaction!
  timestamp: BigInt! @index
  pool: Pool! @index
  token0: Token! @index
  token1: Token! @index
  sender: String! @index
  origin: String! @index
  amount: BigInt! @index # amount of liquidity modified (can be positive or negative)
  amount0: BigInt! # amount of token 0 modified
  amount1: BigInt! # amount of token 1 modified
  tickLower: BigInt! @index
  tickUpper: BigInt! @index
  logIndex: BigInt!
}

type Swap
  @index(fields: ["timestamp", "pool"])
  @index(fields: ["amount0", "pool"]) {
  id: ID! # chainId-transaction hash + "#" + index in swaps array
  chainId: BigInt!
  transaction: Transaction!
  timestamp: BigInt! @index
  pool: Pool! @index
  token0: Token! @index
  token1: Token! @index
  sender: String! @index
  recipient: String! @index
  origin: String! @index
  amount0: BigInt!
  amount1: BigInt!
  sqrtPriceX96: BigInt!
  tick: BigInt! @index
  logIndex: BigInt
}

type PoolDayData {
  id: ID! # chainId-<poolId>-<timestamp rounded to current day by dividing by 86400>
  chainId: BigInt!
  startTimestamp: BigInt! @index
  pool: Pool! @index
  liquidity: BigInt!
  sqrtPriceX96: BigInt!
  tick: BigInt!
  volume0: BigInt!
  volume1: BigInt!
  fees0: BigInt!
  fees1: BigInt!
  txCount: BigInt!
  swapCount: BigInt!
  modifyLiquidityCount: BigInt!
  open_: BigInt!
  high: BigInt!
  low: BigInt!
  close: BigInt!
}

type Pool5MinuteData {
  id: ID! # chainId-<poolId>-<timestamp rounded to nearest 5 minutes>
  chainId: BigInt!
  startTimestamp: BigInt! @index
  pool: Pool! @index
  liquidity: BigInt!
  sqrtPriceX96: BigInt!
  tick: BigInt!
  volume0: BigInt!
  volume1: BigInt!
  fees0: BigInt!
  fees1: BigInt!
  txCount: BigInt!
  swapCount: BigInt!
  modifyLiquidityCount: BigInt!
  open_: BigInt!
  high: BigInt!
  low: BigInt!
  close: BigInt!
}

type PoolHourData {
  id: ID! # chainId-<poolId>-<timestamp rounded to current hour>
  chainId: BigInt!
  startTimestamp: BigInt! @index
  pool: Pool! @index
  liquidity: BigInt!
  sqrtPriceX96: BigInt!
  tick: BigInt!
  volume0: BigInt!
  volume1: BigInt!
  fees0: BigInt!
  fees1: BigInt!
  txCount: BigInt!
  swapCount: BigInt!
  modifyLiquidityCount: BigInt!
  open_: BigInt!
  high: BigInt!
  low: BigInt!
  close: BigInt!
}

type TokenDayData {
  id: ID! # chainId-token address-date
  chainId: BigInt!
  startTimestamp: BigInt! @index
  token: Token! @index
  volume: BigInt!
  txCount: BigInt!
  swapCount: BigInt!
  modifyLiquidityCount: BigInt!
}

type TokenHourData {
  id: ID! # chainId-token address-timestamp
  chainId: BigInt!
  startTimestamp: BigInt! @index
  token: Token! @index
  volume: BigInt!
  txCount: BigInt!
  swapCount: BigInt!
  modifyLiquidityCount: BigInt!
}

type HookStats {
  id: ID! # chainId-hook address
  chainId: BigInt!
  poolCount: BigInt!
  swapCount: BigInt!
  firstPoolCreatedAt: BigInt!
  volume0: BigInt!
  volume1: BigInt!
  fees0: BigInt!
  fees1: BigInt!
  tvl0: BigInt!
  tvl1: BigInt!
}
